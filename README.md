# <div align="center">ü§ñ Advanced AI Telegram Bot</div>

<div align="center">

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg?style=for-the-badge&logo=python&logoColor=white)](https://www.python.org)
[![Telegram](https://img.shields.io/badge/Telegram-Bot-informational?style=for-the-badge&logo=telegram)](https://t.me/AdvChatGptBot)
[![MongoDB](https://img.shields.io/badge/MongoDB-Database-success?style=for-the-badge&logo=mongodb)](https://www.mongodb.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg?style=for-the-badge)](LICENSE)

</div>
<br>
<br>
<div align="center">
<a href="https://t.me/AdvChatGptbot" alt="Run Telegram Bot"> 
  <img src="https://img.shields.io/badge/RUN-Telegram%20Bot-blue?logo=data:image/svg+xml;base64,PHN2ZyBpZD0iTGl2ZWxsb18xIiBkYXRhLW5hbWU9IkxpdmVsbG8gMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmlld0JveD0iMCAwIDI0MCAyNDAiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50IiB4MT0iMTIwIiB5MT0iMjQwIiB4Mj0iMTIwIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMWQ5M2QyIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMzhiMGUzIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHRpdGxlPlRlbGVncmFtX2xvZ288L3RpdGxlPjxjaXJjbGUgY3g9IjEyMCIgY3k9IjEyMCIgcj0iMTIwIiBmaWxsPSJ1cmwoI2xpbmVhci1ncmFkaWVudCkiLz48cGF0aCBkPSJNODEuMjI5LDEyOC43NzJsMTQuMjM3LDM5LjQwNnMxLjc4LDMuNjg3LDMuNjg2LDMuNjg3LDMwLjI1NS0yOS40OTIsMzAuMjU1LTI5LjQ5MmwzMS41MjUtNjAuODlMODEuNzM3LDExOC42WiIgZmlsbD0iI2M4ZGFlYSIvPjxwYXRoIGQ9Ik0xMDAuMTA2LDEzOC44NzhsLTIuNzMzLDI5LjA0NnMtMS4xNDQsOC45LDcuNzU0LDAsMTcuNDE1LTE1Ljc2MywxNy40MTUtMTUuNzYzIiBmaWxsPSIjYTljNmQ4Ii8+PHBhdGggZD0iTTgxLjQ4NiwxMzAuMTc4LDUyLjIsMTIwLjYzNnMtMy41LTEuNDItMi4zNzMtNC42NGMuMjMyLS42NjQuNy0xLjIyOSwyLjEtMi4yLDYuNDg5LTQuNTIzLDEyMC4xMDYtNDUuMzYsMTIwLjEwNi00NS4zNnMzLjIwOC0xLjA4MSw1LjEtLjM2MmEyLjc2NiwyLjc2NiwwLDAsMSwxLjg4NSwyLjA1NSw5LjM1Nyw5LjM1NywwLDAsMSwuMjU0LDIuNTg1Yy0uMDA5Ljc1Mi0uMSwxLjQ0OS0uMTY5LDIuNTQyLS42OTIsMTEuMTY1LTIxLjQsOTQuNDkzLTIxLjQsOTQuNDkzcy0xLjIzOSw0Ljg3Ni01LjY3OCw1LjA0M0E4LjEzLDguMTMsMCwwLDEsMTQ2LjEsMTcyLjVjLTguNzExLTcuNDkzLTM4LjgxOS0yNy43MjctNDUuNDcyLTMyLjE3N2ExLjI3LDEuMjcsMCwwLDEtLjU0Ni0uOWMtLjA5My0uNDY5LjQxNy0xLjA1LjQxNy0xLjA1czUyLjQyNi00Ni42LDUzLjgyMS01MS40OTJjLjEwOC0uMzc5LS4zLS41NjYtLjg0OC0uNC0zLjQ4MiwxLjI4MS02My44NDQsMzkuNC03MC41MDYsNDMuNjA3QTMuMjEsMy4yMSwwLDAsMSw4MS40ODYsMTMwLjE3OFoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=" align="center" style="width: 40%" />
</a>
</div>
<br>
<br>
<div align="center">
  A powerful AI-driven Telegram bot that brings cutting-edge artificial intelligence features to your fingertips.
</div>

---

## ‚ú® Features

<table>
  <tr>
    <td align="center">üí¨</td>
    <td><b>AI Chat</b><br>Natural conversations powered by GPT-4o and other models</td>
    <td align="center">üé®</td>
    <td><b>Image Generation</b><br>Create stunning images from text descriptions, with /img and inline mode</td>
  </tr>
  <tr>
    <td align="center">üîä</td>
    <td><b>Voice Processing</b><br>Two-way voice message and text conversion (speech-to-text, text-to-speech)</td>
    <td align="center">üìù</td>
    <td><b>Text Extraction (img2text)</b><br>Extract text, solve MCQs, and answer questions from images and documents</td>
  </tr>
  <tr>
    <td align="center">üåê</td>
    <td><b>Multi-language Support</b><br>Communicate in your preferred language, with translation and language settings</td>
    <td align="center">üë•</td>
    <td><b>Group Integration</b><br>Full AI functionality in group chats, with group-specific settings</td>
  </tr>
  <tr>
    <td align="center">üì±</td>
    <td><b>Inline Mode</b><br>Generate AI responses and images in any chat, with advanced inline query handling</td>
    <td align="center">‚ö°</td>
    <td><b>Fast, Reliable Delivery</b><br>Optimized for quick, robust interactions, including large code/image snippets</td>
  </tr>
  <tr>
    <td align="center">üóÇÔ∏è</td>
    <td><b>File-to-Text (img2text)</b><br>Upload images or documents and interact with their content via AI</td>
    <td align="center">‚è≥</td>
    <td><b>Image Context Expiry</b><br>Uploaded images for vision/AI analysis are auto-deleted after 2 minutes (configurable)</td>
  </tr>
  <tr>
    <td align="center">üîí</td>
    <td><b>Premium Model Handling</b><br>Premium AI/image models are shown only to eligible users</td>
    <td align="center">üõ°Ô∏è</td>
    <td><b>Admin Tools</b><br>Broadcast images (/share), code snippets (/snippet), ban/unban, premium management, logs, and more</td>
  </tr>
  <tr>
    <td align="center">üß©</td>
    <td><b>Multi-Bot Support</b><br>Run multiple bots with isolated sessions and MongoDB fork safety</td>
    <td align="center">üß†</td>
    <td><b>Advanced Prompting</b><br>Smart prompt logic for images, MCQs, and document Q&A</td>
  </tr>
</table>

> üì± **Try it now**: [t.me/AdvChatGptBot](https://t.me/AdvChatGptBot)

## üöÄ Quick Start

```bash
# Clone repository
git clone https://github.com/TechyCSR/AdvAITelegramBot.git

# Navigate to directory
cd AdvAITelegramBot

# Set up virtual environment
python -m venv .venv
source .venv/bin/activate  # On Windows: .venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Configure your bot
cp config.example.py config.py
# Edit config.py with your API credentials

# Launch!
python run.py
```

## üìã Commands

| Command | Description |
|---------|-------------|
| `/start` | üèÅ Start a conversation with the bot |
| `/help` | ‚ùì Get help and see available commands |
| `/settings` | ‚öôÔ∏è Adjust preferences, language, and models |
| `/img [prompt]` or `/generate [prompt]` | üé® Generate an image from text |
| `/newchat`, `/reset`, `/new`, `/clear_chat` | üîÑ Start a new conversation |
| *Upload image/document* | üìù Extract text, solve MCQs, or ask questions about content |

**How to use:**
- Upload an image or document in private chat to extract text, solve MCQs, or ask questions about its content. Only one image context is active per user; uploading a new image replaces the previous one. Images are auto-deleted after 2 minutes (user is notified).
- For image generation, the bot always replies with a `/img` command snippet and clear copy-paste instructions.
- All code/image snippets are delivered unbroken, using HTML formatting for reliability.

## üõ†Ô∏è Configuration

Edit `config.py` with the following fields:

```python
BOT_TOKEN = "your_telegram_bot_token"  # From BotFather
API_KEY = "your_telegram_api_key"      # From my.telegram.org
API_HASH = "your_telegram_api_hash"    # From my.telegram.org
DATABASE_URL = "mongodb://localhost:27017/"  # MongoDB connection string
ADMINS = [123456789]  # List of Telegram user IDs with admin rights
# Optional advanced settings:
IMAGE_CONTEXT_EXPIRY_MINUTES = 2        # Minutes before uploaded images are auto-deleted
PREMIUM_MODELS = ["gpt-4o", "dalle3", ...] # List of premium models (shown only to premium users)
MULTI_BOT = True                        # Enable multi-bot support (one process per bot)
```

- For multi-bot, provide multiple `BOT_TOKEN`s and set `MULTI_BOT = True`.
- For MongoDB fork safety, each process creates its own MongoClient.
- All settings are documented in `config.py`.

## üß† Usage Notes

- **Image/Document Upload:**
  - Upload an image or document, then ask questions, solve MCQs, or request a description.
  - If a caption is present, it is used as the prompt; otherwise, the bot will prompt the AI to answer questions, solve MCQs, or describe the image.
  - Only one image context is active per user; uploading a new image replaces the previous one.
  - Images are auto-deleted after expiry, and the user is notified.

- **AI Prompting:**
  - The bot is aware of all its capabilities (text, image, vision, MCQ, document, multi-model).
  - For any image generation request, the bot always replies with a `/img` command snippet and clear copy-paste instructions.

- **Code/Prompt Snippets:**
  - Code and image generation snippets are always delivered unbroken, using HTML formatting for reliability.

## üèóÔ∏è System Architecture

The AdvAI Telegram Bot employs a sophisticated, multi-service architecture designed for scalability, reliability, and maintainability.

```mermaid
graph TB
    %% External Services
    subgraph "External APIs"
        TG[Telegram Bot API]
        OPENAI[OpenAI GPT-4o]
        POLL[Pollinations AI]
        DEEPINFRA[DeepInfra Chat]
        GOOGLE[Google OAuth]
    end

    %% User Interfaces
    subgraph "User Interfaces"
        TGBOT[Telegram Bot Interface]
        WEBAPP[Web Application]
        MINIAPP[Telegram Mini App]
        INLINE[Inline Mode]
    end

    %% Core Bot Services
    subgraph "Core Bot System"
        MAIN[Main Bot Process]
        subgraph "Request Processing"
            QUEUE[Request Queue System]
            ASYNC[Async Task Manager]
            RATELIMIT[Rate Limiting]
        end
        subgraph "Service Container"
            SC[Service Container]
            DI[Dependency Injection]
        end
    end

    %% AI Services Layer
    subgraph "AI Processing Layer"
        subgraph "Text AI Services"
            AIRES[AI Response Handler]
            CHAT[Chat Management]
            TRANSLATE[Translation Service]
            LANG[Language Detection]
        end
        subgraph "Image AI Services"
            IMGGEN[Image Generation]
            AUTOIMGGEN[Auto Image Detection]
            INLINEIMG[Inline Image Gen]
            IMG2TEXT[Image to Text]
            VISION[Vision Analysis]
        end
        subgraph "Audio AI Services"
            TTS[Text-to-Speech]
            STT[Speech-to-Text]
            VOICE[Voice Processing]
        end
        subgraph "Video AI Services"
            VIDEOGEN[Video Generation]
            VIDEOQUEUE[Video Queue]
            VIDEOHANDLER[Video Handlers]
        end
    end

    %% Business Logic Layer
    subgraph "Business Logic"
        subgraph "User Management"
            USERMGMT[User Management]
            PREMIUM[Premium Management]
            BANS[Ban Management]
            SETTINGS[User Settings]
        end
        subgraph "Group Management"
            GROUPSET[Group Settings]
            GROUPPERM[Group Permissions]
            GROUPINFO[Group Information]
        end
        subgraph "Admin Tools"
            ADMINCMD[Admin Commands]
            STATS[Statistics]
            LOGS[Logging System]
            MAINTENANCE[Maintenance Mode]
        end
        subgraph "Content Management"
            FEEDBACK[Feedback System]
            RATING[Rating System]
            FILEHANDLER[File Processing]
        end
    end

    %% Data Layer
    subgraph "Data Persistence"
        subgraph "MongoDB Collections"
            USERDB[(User Database)]
            HISTORYDB[(Chat History)]
            IMAGEDB[(Image Storage)]
            STATSDB[(Statistics DB)]
            FEEDBACKDB[(Feedback DB)]
            INTERACTIONDB[(User Interactions)]
        end
        subgraph "File Storage"
            GENIMAGES[Generated Images]
            SESSIONS[Session Files]
            LOGS_FILES[Log Files]
            CACHE[Translation Cache]
        end
    end

    %% Web Services
    subgraph "Web Application Layer"
        subgraph "Flask Web Server"
            FLASK[Flask Application]
            AUTH[Authentication Service]
            WEBAPI[Web API Endpoints]
        end
        subgraph "Frontend"
            HTML[HTML Templates]
            CSS[Static Assets]
            JS[JavaScript]
        end
    end

    %% Deployment & Infrastructure
    subgraph "Infrastructure"
        subgraph "Runtime Environment"
            PYTHON[Python Runtime]
            VENV[Virtual Environment]
            MULTIPROC[Multi-Processing]
        end
        subgraph "Deployment Options"
            DOCKER[Docker Container]
            SYSTEMD[Systemd Service]
            VERCEL[Vercel Deployment]
        end
    end

    %% Connections - User Interfaces
    TGBOT --> TG
    WEBAPP --> GOOGLE
    MINIAPP --> TG
    INLINE --> TG

    %% Connections - Main Flow
    TGBOT --> MAIN
    WEBAPP --> FLASK
    MINIAPP --> FLASK
    INLINE --> MAIN

    %% Connections - Core Processing
    MAIN --> QUEUE
    MAIN --> SC
    QUEUE --> ASYNC
    QUEUE --> RATELIMIT
    SC --> DI

    %% Connections - AI Services
    MAIN --> AIRES
    MAIN --> IMGGEN
    MAIN --> TTS
    MAIN --> VIDEOGEN

    AIRES --> OPENAI
    AIRES --> DEEPINFRA
    AIRES --> AUTOIMGGEN

    IMGGEN --> POLL
    INLINEIMG --> POLL
    IMG2TEXT --> OPENAI
    VISION --> OPENAI

    TTS --> OPENAI
    STT --> OPENAI

    VIDEOGEN --> POLL

    %% Connections - Business Logic
    MAIN --> USERMGMT
    MAIN --> GROUPSET
    MAIN --> ADMINCMD
    MAIN --> FEEDBACK

    FLASK --> AUTH
    FLASK --> WEBAPI
    AUTH --> USERMGMT
    AUTH --> PREMIUM

    %% Connections - Data Layer
    AIRES --> HISTORYDB
    USERMGMT --> USERDB
    IMGGEN --> IMAGEDB
    STATS --> STATSDB
    FEEDBACK --> FEEDBACKDB
    MAIN --> INTERACTIONDB

    IMGGEN --> GENIMAGES
    MAIN --> SESSIONS
    LOGS --> LOGS_FILES
    TRANSLATE --> CACHE

    %% Connections - Infrastructure
    MAIN --> PYTHON
    FLASK --> PYTHON
    PYTHON --> VENV
    MAIN --> MULTIPROC

    %% Styling
    classDef external fill:#ff6b6b,stroke:#d63031,stroke-width:2px,color:#fff
    classDef interface fill:#74b9ff,stroke:#0984e3,stroke-width:2px,color:#fff
    classDef core fill:#55a3ff,stroke:#2d3436,stroke-width:2px,color:#fff
    classDef ai fill:#fd79a8,stroke:#e84393,stroke-width:2px,color:#fff
    classDef business fill:#fdcb6e,stroke:#e17055,stroke-width:2px,color:#333
    classDef data fill:#6c5ce7,stroke:#5f3dc4,stroke-width:2px,color:#fff
    classDef web fill:#00b894,stroke:#00cec9,stroke-width:2px,color:#fff
    classDef infra fill:#636e72,stroke:#2d3436,stroke-width:2px,color:#fff

    class TG,OPENAI,POLL,DEEPINFRA,GOOGLE external
    class TGBOT,WEBAPP,MINIAPP,INLINE interface
    class MAIN,QUEUE,ASYNC,RATELIMIT,SC,DI core
    class AIRES,CHAT,TRANSLATE,LANG,IMGGEN,AUTOIMGGEN,INLINEIMG,IMG2TEXT,VISION,TTS,STT,VOICE,VIDEOGEN,VIDEOQUEUE,VIDEOHANDLER ai
    class USERMGMT,PREMIUM,BANS,SETTINGS,GROUPSET,GROUPPERM,GROUPINFO,ADMINCMD,STATS,LOGS,MAINTENANCE,FEEDBACK,RATING,FILEHANDLER business
    class USERDB,HISTORYDB,IMAGEDB,STATSDB,FEEDBACKDB,INTERACTIONDB,GENIMAGES,SESSIONS,LOGS_FILES,CACHE data
    class FLASK,AUTH,WEBAPI,HTML,CSS,JS web
    class PYTHON,VENV,MULTIPROC,DOCKER,SYSTEMD,VERCEL infra
```

## üõ†Ô∏è Setup Guide

### System Requirements

- Python 3.8 or higher
- MongoDB (local or cloud instance)
- Telegram Bot Token from BotFather
- 1GB+ RAM recommended for image generation

### Detailed Installation

<details>
<summary>1. Environment Setup</summary>

```bash
# Make sure you have Python 3.8+ installed
python --version

# Create and activate virtual environment
python -m venv .venv
source .venv/bin/activate  # On Windows: .venv\Scripts\activate
```
</details>
<details>
<summary>2. Install Dependencies</summary>

```bash
# Install required packages
pip install -r requirements.txt

# Verify installations
pip list
```
</details>

<details>
<summary>3. Configuration</summary>

Create a `config.py` file with your credentials:

```python
BOT_TOKEN = "your_telegram_bot_token"  # From BotFather
API_KEY = "your_telegram_api_key"      # From my.telegram.org
API_HASH = "your_telegram_api_hash"    # From my.telegram.org
DATABASE_URL = "mongodb://localhost:27017/"
ADMINS = [123456789]  # Your Telegram user ID
# Optional advanced settings:
IMAGE_CONTEXT_EXPIRY_MINUTES = 2        # Minutes before uploaded images are auto-deleted
PREMIUM_MODELS = ["gpt-4o", "dalle3", ...] # List of premium models (shown only to premium users)
MULTI_BOT = True                        # Enable multi-bot support (one process per bot)
```
</details>

<details>
<summary>4. Database Setup</summary>

```bash
# Start MongoDB (if using local instance)
mongod --dbpath /path/to/data/db

# The bot will automatically create required collections
```
</details>

<details>
<summary>5. Running the Bot</summary>

```bash
# Start the bot
python run.py

# For production deployment
# Consider using systemd, Docker, or PM2
```
</details>

## üîß Advanced Configuration

<details>
<summary>Docker Deployment</summary>

```bash
# Build the Docker image
docker build -t advai-telegram-bot .

# Run the container
docker run -d --name advai-bot advai-telegram-bot
```
</details>

<details>
<summary>Environment Variables</summary>

You can use environment variables instead of config.py:

```bash
export BOT_TOKEN="your_telegram_bot_token"
export API_KEY="your_telegram_api_key"
export API_HASH="your_telegram_api_hash"
export DATABASE_URL="mongodb://localhost:27017/"
```
</details>

## üíª Technologies

- [**Pyrogram**](https://docs.pyrogram.org/): Modern, fast, and elegant Telegram client library for Python.
- [**MongoDB**](https://www.mongodb.com/): Scalable NoSQL database for user data and bot state.
- [**OpenAI GPT-4o & Vision**](https://platform.openai.com/docs/models/gpt-4o): Advanced language and vision models for text, image, and document understanding.
- [**Docker**](https://www.docker.com/): Containerization for easy deployment and scaling.
- [**Python 3.8+**](https://www.python.org/): The core language powering all features and async operations.

## ü§ù Contributing

Contributions are welcome! Check out our [Contributing Guide](CONTRIBUTING.md) to get started.

<details>
<summary>Development Workflow</summary>

1. Fork the repository
2. Create a feature branch: `git checkout -b feature/amazing-feature`
3. Commit your changes: `git commit -m 'Add amazing feature'`
4. Push to the branch: `git push origin feature/amazing-feature`
5. Open a Pull Request
</details>

## üìù License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---


<div align="center">
  Made with ‚ù§Ô∏è by @TechyCSR
  <br>
  <a href="https://techycsr.me">Website</a> ‚Ä¢
  <a href="https://x.com/techycsr">Twitter</a> ‚Ä¢
  <a href="https://linkedin.com/in/techycsr">LinkedIn</a>
</div> 
